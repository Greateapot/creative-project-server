# Серверная часть творческой работы

## Параметры запуска сервера

### --local-ip
Обязательный параметр.

Локальный айпи устройства, на котором запускается сервер.

### --port
Необязательный параметр.

Порт, который будет слушать сервер.

Стандартное значение: 8097

### --scan-delay
Необязательный параметр.

Время ожидания ответа от другого устройства в сети при сканировании других серверов онлайн. (Стоило назвать этот параметр scan-timeout, да и функцию надо бы переделать)

Стандартное значение: 500

### --scan-threads
Необязательный параметр.

Количество потоков, используемых при сканировании других серверов онлайн.

Стандартное значение: 4
### --data-filename
Необязательный параметр.

Название файла, в котором будут храниться все сохраненные объекты.

Стандартное значение: data.json
### --corr-file-ext
Необязательный параметр.

Расширение файла, которое будет добавлено хранящему объекты файлу в случае его повреждения.

Стандартное значение: .crp


## API
lip-lock - запрос может делать только хост.

### /get
Поля:
1. title (string) - название запрашиваемого объекта.

Описание:

Получить данные в зависимости от типа запрашиваемого объекта.

Вернёт:

1. ok (bool) - успешен ли запрос,
2. errCode (string, opt) - код ошибки,
3. data (string, opt) - зависит от типа объекта:

- (Если папка) список файлов в папке (WIP),
- (Если файл) ничего, файл будет послан в теле ответа,
- (Если ссылка) ссылку.

### /list
Описание:

Получить список сохраненных объектов. Если запрос делает хост, объекты так же будут содержать ссылку/пути до файла/папки.

Вернёт:
1. ok (bool) - успешен ли запрос,
2. errCode (string, opt) - код ошибки,
3. data (list[models.Item], opt) - список объектов.

### /add (lip-lock)
Поля:
1. path (string) - ссылка/путь до файла/папки,
2. title (string) - название нового объекта (не должно повторятся),
3. type (string) - тип объекта (папка/файл/ссылка).

Описание:

Добавить новый объект в базу данных.

Вернёт:
1. ok (bool) - успешен ли запрос,
2. errCode (string, opt) - код ошибки.

### /del (lip-lock)
Поля:
1. title (string) - название удаляемого объекта.

Описание:

Удаляет объект(-ы) из базы данных.

Вернет:
1. ok (bool) - успешен ли запрос,
2. errCode (string, opt) - код ошибки.

### /online (lip-lock)
Описание:

Возвращает список других серверов онлайн.

Вернёт:
1. ok (bool) - успешен ли запрос,
2. errCode (string, opt) - код ошибки,
3. data (models.Online, opt) - список ip адресов.

### /shutdown (lip-lock)
Описание:

Завершает работу сервера.

Вернёт:
1. ok (bool) - успешен ли запрос,
2. errCode (string, opt) - код ошибки.

## Виды ошибок
1. Err...? - Затычка для странной логики,
2. Access Denied - Доступ закрыт,
3. No required field in request query - Нет нужного поля в запросе,
4. Item already exists - Объект уже существует,
5. Item not exists - Объект не существует,
6. Cant't send file - Не удалось отправить файл,
7. WIP